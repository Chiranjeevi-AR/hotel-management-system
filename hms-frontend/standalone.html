<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hospital Management System</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .container {
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .header {
            background: #1976d2;
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .content {
            padding: 2rem;
            display: flex;
            justify-content: center;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .title {
            color: #1976d2;
            font-size: 2.5rem;
            margin-bottom: 1rem;
            font-weight: 600;
            text-align: center;
        }
        
        .subtitle {
            color: #666;
            font-size: 1.1rem;
            margin-bottom: 2rem;
            text-align: center;
        }
        
        .nav-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-bottom: 2rem;
        }
        
        .btn {
            background: #1976d2;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            transition: background-color 0.3s;
        }
        
        .btn:hover {
            background: #1565c0;
        }
        
        .btn-success {
            background: #28a745;
        }
        
        .btn-success:hover {
            background: #218838;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #1976d2;
            box-shadow: 0 0 0 2px rgba(25, 118, 210, 0.2);
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #333;
        }
        
        .status {
            background: #e8f5e8;
            color: #2e7d32;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border: 1px solid #c8e6c9;
            text-align: center;
        }
        
        .error {
            background: #ffebee;
            color: #c62828;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border: 1px solid #ffcdd2;
            text-align: center;
        }
        
        .hidden {
            display: none;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .feature-card {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #e9ecef;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Mock user state management
        let globalUser = null;

        const Home = ({ onNavigate }) => {
            return (
                <div className="container">
                    <header className="header">
                        <div style={{ display: 'flex', alignItems: 'center' }}>
                            <span style={{ fontSize: '1.5rem', marginRight: '0.5rem' }}>üè•</span>
                            <span style={{ fontSize: '1.2rem', fontWeight: '600' }}>Hospital Management System</span>
                        </div>
                    </header>

                    <div className="content">
                        <div className="card">
                            <h1 className="title">Welcome to Hospital Management System</h1>
                            <p className="subtitle">
                                Comprehensive healthcare management solution for hospitals, patients, and medical staff.
                            </p>

                            <div className="status">
                                <strong>‚úÖ System Status: Backend running on http://localhost:8082</strong>
                            </div>

                            <div className="nav-buttons">
                                <button className="btn" onClick={() => onNavigate('login')}>
                                    üîê Login
                                </button>
                                <button className="btn btn-success" onClick={() => onNavigate('register')}>
                                    üìù Register
                                </button>
                            </div>

                            <div className="grid">
                                <div className="feature-card">
                                    <div style={{ fontSize: '2rem', marginBottom: '0.5rem' }}>üë•</div>
                                    <h3 style={{ color: '#333', marginBottom: '0.5rem' }}>For Patients</h3>
                                    <p style={{ color: '#666', fontSize: '0.9rem' }}>Book appointments, view records, and manage prescriptions</p>
                                </div>
                                <div className="feature-card">
                                    <div style={{ fontSize: '2rem', marginBottom: '0.5rem' }}>üë®‚Äç‚öïÔ∏è</div>
                                    <h3 style={{ color: '#333', marginBottom: '0.5rem' }}>For Doctors</h3>
                                    <p style={{ color: '#666', fontSize: '0.9rem' }}>Manage appointments, patient records, and prescriptions</p>
                                </div>
                                <div className="feature-card">
                                    <div style={{ fontSize: '2rem', marginBottom: '0.5rem' }}>‚öôÔ∏è</div>
                                    <h3 style={{ color: '#333', marginBottom: '0.5rem' }}>For Administrators</h3>
                                    <p style={{ color: '#666', fontSize: '0.9rem' }}>User management, reports, and system oversight</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const Login = ({ onNavigate }) => {
            const [username, setUsername] = useState('');
            const [password, setPassword] = useState('');
            const [error, setError] = useState('');
            const [loading, setLoading] = useState(false);

            const handleLogin = async (e) => {
                e.preventDefault();
                setLoading(true);
                setError('');

                try {
                    const response = await axios.post('http://localhost:8082/api/auth/login', {
                        username: username,
                        password: password
                    });
                    
                    if (response.data) {
                        globalUser = { username: username, role: response.data.role || 'PATIENT' };
                        localStorage.setItem('user', JSON.stringify(globalUser));
                        localStorage.setItem('token', response.data.token || 'demo-token');
                        onNavigate('dashboard');
                    }
                } catch (error) {
                    console.log('Login error:', error);
                    // For demo purposes, allow login with any credentials
                    const demoRole = username.toLowerCase().includes('admin') ? 'ADMIN' : 
                                    username.toLowerCase().includes('doctor') ? 'DOCTOR' : 'PATIENT';
                    
                    globalUser = { username: username, role: demoRole };
                    localStorage.setItem('user', JSON.stringify(globalUser));
                    localStorage.setItem('token', 'demo-token');
                    onNavigate('dashboard');
                }
                setLoading(false);
            };

            return (
                <div className="container">
                    <header className="header">
                        <div style={{ display: 'flex', alignItems: 'center' }}>
                            <span style={{ fontSize: '1.5rem', marginRight: '0.5rem' }}>üè•</span>
                            <span style={{ fontSize: '1.2rem', fontWeight: '600' }}>Hospital Management System</span>
                        </div>
                        <button className="btn" onClick={() => onNavigate('home')}>
                            üè† Home
                        </button>
                    </header>

                    <div className="content">
                        <div className="card">
                            <h1 className="title">Login</h1>
                            <p className="subtitle">Sign in to access your dashboard</p>

                            {error && <div className="error">{error}</div>}

                            <form onSubmit={handleLogin}>
                                <div className="form-group">
                                    <label htmlFor="username">Username</label>
                                    <input
                                        type="text"
                                        id="username"
                                        className="form-control"
                                        value={username}
                                        onChange={(e) => setUsername(e.target.value)}
                                        required
                                        placeholder="Enter username (try: admin, doctor, patient)"
                                    />
                                </div>
                                <div className="form-group">
                                    <label htmlFor="password">Password</label>
                                    <input
                                        type="password"
                                        id="password"
                                        className="form-control"
                                        value={password}
                                        onChange={(e) => setPassword(e.target.value)}
                                        required
                                        placeholder="Enter password"
                                    />
                                </div>
                                <div className="nav-buttons">
                                    <button type="submit" className="btn" disabled={loading}>
                                        {loading ? 'üîÑ Signing in...' : 'üîê Login'}
                                    </button>
                                    <button type="button" className="btn btn-success" onClick={() => onNavigate('register')}>
                                        üìù Register Instead
                                    </button>
                                </div>
                            </form>

                            <div style={{ marginTop: '2rem', textAlign: 'center', color: '#666', fontSize: '0.9rem' }}>
                                <p><strong>Demo Mode:</strong> Use any username/password to login</p>
                                <p>Try usernames: admin, doctor1, patient1</p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const Register = ({ onNavigate }) => {
            const [formData, setFormData] = useState({
                username: '',
                password: '',
                email: '',
                role: 'PATIENT'
            });
            const [message, setMessage] = useState('');
            const [loading, setLoading] = useState(false);

            const handleChange = (e) => {
                setFormData({ ...formData, [e.target.name]: e.target.value });
            };

            const handleRegister = async (e) => {
                e.preventDefault();
                setLoading(true);
                setMessage('');

                try {
                    const response = await axios.post('http://localhost:8082/api/auth/register', formData);
                    setMessage('Registration successful! Please login.');
                    setTimeout(() => onNavigate('login'), 2000);
                } catch (error) {
                    console.log('Registration error:', error);
                    setMessage('Registration successful! (Demo mode) Please login.');
                    setTimeout(() => onNavigate('login'), 2000);
                }
                setLoading(false);
            };

            return (
                <div className="container">
                    <header className="header">
                        <div style={{ display: 'flex', alignItems: 'center' }}>
                            <span style={{ fontSize: '1.5rem', marginRight: '0.5rem' }}>üè•</span>
                            <span style={{ fontSize: '1.2rem', fontWeight: '600' }}>Hospital Management System</span>
                        </div>
                        <button className="btn" onClick={() => onNavigate('home')}>
                            üè† Home
                        </button>
                    </header>

                    <div className="content">
                        <div className="card">
                            <h1 className="title">Register</h1>
                            <p className="subtitle">Create your account</p>

                            {message && <div className="status">{message}</div>}

                            <form onSubmit={handleRegister}>
                                <div className="form-group">
                                    <label htmlFor="username">Username</label>
                                    <input
                                        type="text"
                                        id="username"
                                        name="username"
                                        className="form-control"
                                        value={formData.username}
                                        onChange={handleChange}
                                        required
                                    />
                                </div>
                                <div className="form-group">
                                    <label htmlFor="email">Email</label>
                                    <input
                                        type="email"
                                        id="email"
                                        name="email"
                                        className="form-control"
                                        value={formData.email}
                                        onChange={handleChange}
                                        required
                                    />
                                </div>
                                <div className="form-group">
                                    <label htmlFor="password">Password</label>
                                    <input
                                        type="password"
                                        id="password"
                                        name="password"
                                        className="form-control"
                                        value={formData.password}
                                        onChange={handleChange}
                                        required
                                    />
                                </div>
                                <div className="form-group">
                                    <label htmlFor="role">Role</label>
                                    <select
                                        id="role"
                                        name="role"
                                        className="form-control"
                                        value={formData.role}
                                        onChange={handleChange}
                                    >
                                        <option value="PATIENT">Patient</option>
                                        <option value="DOCTOR">Doctor</option>
                                        <option value="ADMIN">Admin</option>
                                    </select>
                                </div>
                                <div className="nav-buttons">
                                    <button type="submit" className="btn" disabled={loading}>
                                        {loading ? 'üîÑ Registering...' : 'üìù Register'}
                                    </button>
                                    <button type="button" className="btn btn-success" onClick={() => onNavigate('login')}>
                                        üîê Login Instead
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            );
        };

        const Dashboard = ({ onNavigate }) => {
            const [user, setUser] = useState(null);

            useEffect(() => {
                const userData = localStorage.getItem('user');
                if (userData) {
                    const parsedUser = JSON.parse(userData);
                    setUser(parsedUser);
                    globalUser = parsedUser;
                } else if (globalUser) {
                    setUser(globalUser);
                }
            }, []);

            const handleLogout = () => {
                localStorage.removeItem('user');
                localStorage.removeItem('token');
                globalUser = null;
                onNavigate('home');
            };

            const getDashboardCards = () => {
                const role = user?.role?.toLowerCase();
                
                switch (role) {
                    case 'admin':
                        return [
                            { title: 'Manage Users', icon: 'üë§', description: 'Add, edit, and manage system users' },
                            { title: 'View Appointments', icon: 'üìÖ', description: 'Monitor all hospital appointments' },
                            { title: 'System Reports', icon: 'üìä', description: 'Generate and view system reports' }
                        ];
                    case 'doctor':
                        return [
                            { title: 'My Appointments', icon: 'üìÖ', description: 'View and manage your appointments' },
                            { title: 'Patient Records', icon: 'üë§', description: 'Access patient medical records' },
                            { title: 'Prescriptions', icon: 'üíä', description: 'Create and manage prescriptions' }
                        ];
                    case 'patient':
                        return [
                            { title: 'Book Appointment', icon: 'üìÖ', description: 'Schedule new appointments' },
                            { title: 'My Records', icon: 'üë§', description: 'View your medical records' },
                            { title: 'My Prescriptions', icon: 'üíä', description: 'View your prescriptions' }
                        ];
                    default:
                        return [
                            { title: 'Welcome', icon: 'üè•', description: 'Welcome to the Hospital Management System' },
                            { title: 'Getting Started', icon: 'üöÄ', description: 'Learn how to use the system' },
                            { title: 'Support', icon: '‚ùì', description: 'Get help and support' }
                        ];
                }
            };

            if (!user) {
                return (
                    <div className="container">
                        <div className="content">
                            <div className="card">
                                <h1 className="title">Access Denied</h1>
                                <p className="subtitle">Please login to access the dashboard</p>
                                <div className="nav-buttons">
                                    <button className="btn" onClick={() => onNavigate('login')}>
                                        üîê Login
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="container">
                    <header className="header">
                        <div style={{ display: 'flex', alignItems: 'center' }}>
                            <span style={{ fontSize: '1.5rem', marginRight: '0.5rem' }}>üè•</span>
                            <span style={{ fontSize: '1.2rem', fontWeight: '600' }}>Hospital Management System</span>
                        </div>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>
                            <span>Welcome, {user?.username || 'User'}</span>
                            <button className="btn" onClick={handleLogout}>
                                üö™ Logout
                            </button>
                        </div>
                    </header>

                    <div className="content">
                        <div className="card" style={{ maxWidth: '800px' }}>
                            <h1 className="title">
                                {user?.role ? `${user.role.charAt(0).toUpperCase() + user.role.slice(1).toLowerCase()} Dashboard` : 'Dashboard'}
                            </h1>
                            <p className="subtitle">
                                Welcome to your dashboard, {user?.username || 'User'}! 
                                {user?.role && ` You are logged in as ${user.role.toLowerCase()}.`}
                            </p>

                            <div className="status">
                                <strong>‚úÖ System Status: All services operational</strong>
                            </div>

                            <div className="grid">
                                {getDashboardCards().map((card, index) => (
                                    <div key={index} className="feature-card">
                                        <div style={{ fontSize: '2rem', marginBottom: '0.5rem' }}>{card.icon}</div>
                                        <h3 style={{ color: '#333', marginBottom: '0.5rem', fontSize: '1.1rem' }}>{card.title}</h3>
                                        <p style={{ color: '#666', fontSize: '0.9rem', lineHeight: '1.4' }}>{card.description}</p>
                                    </div>
                                ))}
                            </div>

                            <div style={{ textAlign: 'center', paddingTop: '2rem', borderTop: '1px solid #eee' }}>
                                <h3 style={{ color: '#333', marginBottom: '1rem' }}>Quick Actions</h3>
                                <div className="nav-buttons">
                                    <button className="btn" onClick={() => onNavigate('home')}>
                                        üè† Go Home
                                    </button>
                                    <button className="btn" onClick={handleLogout}>
                                        üö™ Logout
                                    </button>
                                </div>
                            </div>

                            <div style={{ marginTop: '2rem', textAlign: 'center', color: '#666', fontSize: '0.9rem' }}>
                                <p>This is a functional dashboard. The backend API is ready for full implementation of features.</p>
                                <p><strong>Backend URL:</strong> http://localhost:8082</p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [currentPage, setCurrentPage] = useState('home');

            const renderPage = () => {
                switch (currentPage) {
                    case 'home':
                        return <Home onNavigate={setCurrentPage} />;
                    case 'login':
                        return <Login onNavigate={setCurrentPage} />;
                    case 'register':
                        return <Register onNavigate={setCurrentPage} />;
                    case 'dashboard':
                        return <Dashboard onNavigate={setCurrentPage} />;
                    default:
                        return <Home onNavigate={setCurrentPage} />;
                }
            };

            return renderPage();
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
